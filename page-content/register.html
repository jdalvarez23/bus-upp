<div id="sign_Up_Page" class="container">
  <div class="row">
    <div class="col-lg-12 text-center">
      <h1>Welcome to <span class="brand-font">BusUp!</span></h1>
      <p class="lead">An app created to keep you informed!</p>
      <hr>
    </div>
    <div class="col-md-6 offset-md-3">
      <div id="sign_Up_Page_Alert" class="alert alert-danger hide">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <h4 class="alert-heading">Warning!</h4>
        <p id="alert_Description" class="mb-0"></p>
      </div>
      <h4 id="getStarted_Header" class="text-center">Let's get started!</h4>
      <form id="register_Form">
        <fieldset>
          <div class="form-group">
            <label for="first_Name">First Name</label>
            <input type="text" name="name" class="form-control" id="first_Name" placeholder="Enter First Name">
          </div>
          <p><span class="brand-font">BusUp!</span> lets you see the forecast for your location. Please enter your location below:</p>
          <div class="input-group">
            <input type="text" name="location" class="form-control" id="location" placeholder="Enter Location (City, State)">
            <div class="input-group-append">
              <!-- map-marker-alt -->
              <button class="btn btn-info" type="button" title="Location"><i class="fas fa-location-arrow fa-lg"></i></button>
            </div>
          </div>
          <div class="form-group mt-3">
            <button id="register_Form_Button" type="button"  name="submit" class="btn btn-success btn-block">Submit</button>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</div>
<script type="text/javascript">
  // Execute when register form is submitted
  $('#register_Form_Button').on('click', function(e) {
    // Initialization phase
    var submittedData = $('#register_Form').serializeArray(); // initialize serialized array of form data variable
    var dataObjects = {}; // initialize data object variable
    var attempt; // initialize attempt variable
    var error = false; // initialize error variable
    dataObjects.registered = "true"; // set registered value in object to true

    // Processing phase
    for (var i = 0; i < submittedData.length; i++) {
      if (submittedData[i].value != "") {
        dataObjects[field.name] = field.value; // set object key values
      } else {
        displayError("#sign_Up_Page_Alert", 'Values cannot be empty.');
        return false;
      }
    }


    $(submittedData).each(function(i, field) {
      // Execute if field value is empty
      if (field.value == "") {
        displayError("#sign_Up_Page_Alert", 'Values cannot be empty.');
        error = true; // set error variable to true
        return;
      } else {
        dataObjects[field.name] = field.value; // set object key values
      }
    });

    // Execute if location meets regular expression syntax
    if (/[\w ]+, \w{2}/.test(dataObjects['location'])) {
      console.log('Valid location input');
    // Execute if location does not meet regular expression syntax
    } else {
      // Display error notification
      displayError("#sign_Up_Page_Alert", 'Invalid location inserted. Please insert your location in the following format: City, State. For example: "Chicago, IL"');
    }

    dataObjects.savedStops = ''; // initialize saved stops value in data object

    console.log(dataObjects);

    // Execute if attempt is first time
    if ($('#getStarted_Header').text() == "Let's get started!") {
      attempt = "firstTime"; // set value to first time
    // Execute if attempt is data update
    } else if ($('#getStarted_Header').text() == "Edit your information") {
      attempt = "update"; // set value to update
    }

    // Execute if no error is present
    if (error != true) {
      writeData(attempt, dataObjects); // method called to write user information to indexedDB
      error = false; // set error variable to false
      dataObjects = {}; // empty data object variable
      submittedData = ""; // empty serialized array of form data variable
    }

    e.preventDefault();
  });
</script>
